name: Build Project
description: Builds the project
inputs:
  artifact-name:
    description: The name of the artifact to upload
    required: true
runs:
  using: "composite"
  steps:
    - name: checkout repository
      uses: actions/checkout@v3
    - name: setup jdk 21
      uses: actions/setup-java@v5
      with:
        distribution: "adopt"
        java-version: 21
    - name: Cache Gradle packages
      uses: actions/cache@v4
      with:
        path: ~/.gradle/caches
        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }}
        restore-keys: ${{ runner.os }}-gradle
    - name: make gradle wrapper executable
      shell: bash
      run: chmod +x ./gradlew
    - name: build with gradle
      shell: bash
      run: ./gradlew build
    - uses: actions/upload-artifact@v4
      with:
        name: build-artifacts-${{inputs.artifact-name}}
        path: version/*/build/libs
